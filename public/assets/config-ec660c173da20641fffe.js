webpackJsonp([30],{36:function(e,t,n){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=[{value:"Number",label:"数值字段"},{value:"Text",label:"文本框单行"},{value:"TextArea",label:"文本框多行"},{value:"Select",label:"选择列表(单行)"},{value:"MultiSelect",label:"选择列表(多行)"},{value:"CheckboxGroup",label:"复选按钮"},{value:"RadioGroup",label:"单选按钮"},{value:"DatePicker",label:"日期选择控件"},{value:"DateTimePicker",label:"日期时间选择控件"},{value:"TimeTracking",label:"时间跟踪"},{value:"File",label:"文件"},{value:"SingleVersion",label:"单一版本选择"},{value:"MultiVersion",label:"多版本选择"},{value:"SingleUser",label:"单一用户选择"},{value:"MultiUser",label:"多用户选择"},{value:"Url",label:"URL"}];t.FieldTypes=e;var n=[{id:"new",name:"新建"},{id:"inprogress",name:"进行中"},{id:"completed",name:"完成"}];t.StateCategories=n;var a={project:[{id:"view_project",name:"查看项目"},{id:"manage_project",name:"管理项目"}],issue:[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"delete_issue",name:"删除问题"},{id:"assign_issue",name:"分配问题"},{id:"assigned_issue",name:"被分配问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reset_issue",name:"重置问题"},{id:"link_issue",name:"链接问题"},{id:"move_issue",name:"移动问题"},{id:"exec_workflow",name:"执行流程"}],comments:[{id:"add_comments",name:"添加备注"},{id:"edit_comments",name:"编辑备注"},{id:"edit_self_comments",name:"编辑自己的备注"},{id:"delete_comments",name:"删除备注"},{id:"delete_self_comments",name:"删除自己的备注"}],worklogs:[{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"},{id:"edit_self_worklog",name:"编辑自己的工作日志"},{id:"delete_worklog",name:"删除工作日志"},{id:"delete_self_worklog",name:"删除自己的工作日志"}],files:[{id:"upload_file",name:"上传附件"},{id:"download_file",name:"下载附件"},{id:"remove_file",name:"删除附件"},{id:"remove_self_file",name:"删除自己上传附件"}]};t.Permissions=a;var l=[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"del_issue",name:"删除问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reopen_issue",name:"重新打开问题"},{id:"create_version",name:"创建版本"},{id:"edit_version",name:"编辑版本"},{id:"release_version",name:"发布版本"},{id:"merge_version",name:"合并版本"},{id:"del_version",name:"删除版本"},{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"}];t.webhookEvents=l;var r={CARD:"card",KANBAN_COLUMN:"kanban_column",KANBAN_FILTER:"kanban_filter"};t.CardTypes=r}).call(this)}finally{}},203:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e,t,n){for(var a=!0;a;){var l=e,r=t,o=n;a=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var u=i.get;if(void 0===u)return;return u.call(o)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=r,n=o,a=!0,i=s=void 0}},u=n(2),s=a(u),c=n(3),d=n(4),f=a(d),p=n(205).mermaidAPI,m=function(e){function t(e){l(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),p.initialize({startOnLoad:!1})}return r(t,e),o(t,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.collection,n=e.state,a=t.length,l="graph LR;S(( ))-->"+(t.length>0?t[0].id+'["'+t[0].name+'"]':"-")+";",r=function(e){var n=f.default.escape(t[e].name);return t[e].actions&&t[e].actions.length<=0?(l+=t[e].id+'["'+n+'"];',"continue"):void f.default.map(t[e].actions,function(a){f.default.map(a.results,function(r){l+=t[e].id+'["'+n+'"]',l+='--"'+f.default.escape(a.name)+"("+a.id+')"-->';var o=f.default.find(t,{id:r.step});l+=o.id+'["'+f.default.escape(o.name)+'"];'})})},o=0;o<a;o++){r(o)}if(n){var i=f.default.find(t,{state:n});i&&(l+=" style "+i.id+" fill:#ffffbd;")}p.render("div",l,null,document.getElementById("chart"))}},{key:"render",value:function(){var e=this.props,t=e.name,n=(e.collection,e.close);return s.default.createElement(c.Modal,{show:!0,onHide:n,backdrop:"static",bsSize:"large","aria-labelledby":"contained-modal-title-sm"},s.default.createElement(c.Modal.Header,{closeButton:!0,style:{background:"#f0f0f0",height:"50px"}},s.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"工作流预览",t?" - "+t:"")),s.default.createElement(c.Modal.Body,{style:{maxHeight:"580px",overflow:"auto"}},s.default.createElement("div",{className:"mermaid",id:"chart"})),s.default.createElement(c.Modal.Footer,null,s.default.createElement("span",{style:{"float":"left",marginTop:"7px"}},"提示：预览不支持IE"),s.default.createElement(c.Button,{onClick:n},"关闭")))}}],[{key:"propTypes",value:{name:u.PropTypes.string,state:u.PropTypes.string,collection:u.PropTypes.array.isRequired,close:u.PropTypes.func.isRequired},enumerable:!0}]),t}(u.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},205:function(e,t){e.exports=window.mermaid},590:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e,t,n){for(var a=!0;a;){var l=e,r=t,o=n;a=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var u=i.get;if(void 0===u)return;return u.call(o)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=r,n=o,a=!0,i=s=void 0}},u=n(2),s=a(u),c=n(3),d=n(4),f=a(d),p=n(36),m=function(e){function t(e){l(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleCancel=this.handleCancel.bind(this)}return r(t,e),o(t,[{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.name;return s.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},s.default.createElement(c.Modal.Header,{closeButton:!0,style:{background:"#f0f0f0",height:"50px"}},s.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"预览界面",n?" - "+n:"")),s.default.createElement(c.Modal.Body,{style:{height:"420px",overflow:"auto"}},s.default.createElement(c.ListGroup,null,f.default.map(t,function(e,t){return s.default.createElement(c.ListGroupItem,{header:e.name||""},"键值:"+(e.key||"-")+" - 类型:"+(f.default.find(p.FieldTypes,{value:e.type})?f.default.find(p.FieldTypes,{value:e.type}).label:"")+(e.required?" - 必填":""))}))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{onClick:this.handleCancel},"关闭")))}}],[{key:"propTypes",value:{close:u.PropTypes.func.isRequired,name:u.PropTypes.string,data:u.PropTypes.array.isRequired},enumerable:!0}]),t}(u.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},1745:function(e,t,n){try{(function(){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{actions:(0,m.bindActionCreators)(v,e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=function(e,t,n){for(var a=!0;a;){var l=e,r=t,o=n;a=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var u=i.get;if(void 0===u)return;return u.call(o)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=r,n=o,a=!0,i=s=void 0}},d=n(2),f=l(d),p=n(38),m=n(40),y=n(1986),v=a(y),b=n(1746),h=function(e){function t(e){r(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.pid=""}o(t,e),s(t,[{key:"index",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.index(this.pid));case 2:return e.abrupt("return",this.props.config.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e=this.props,t=e.actions,n=e.params.key;t.index(n),this.pid=n}},{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(b,u({index:this.index.bind(this),project:this.props.project.item},this.props.config)))}}],[{key:"propTypes",value:{actions:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,project:d.PropTypes.object.isRequired,config:d.PropTypes.object.isRequired},enumerable:!0}]);var n=t;return t=(0,p.connect)(function(e){var t=e.project,n=e.config;return{project:t,config:n}},i)(t)||t}(d.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},1746:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e,t,n){for(var a=!0;a;){var l=e,r=t,o=n;a=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var u=i.get;if(void 0===u)return;return u.call(o)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=r,n=o,a=!0,i=s=void 0}},u=n(2),s=a(u),c=(n(37),n(3)),d=(n(6),n(4)),f=a(d),p=n(36),m=n(5),y=n(203),v=n(590),b=function(e){function t(e){var n=this;l(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={screenPreviewModalShow:!1,screenSchema:[],screenName:"",wfPreviewModalShow:!1,wfSteps:[],wfName:""},this.allPermissions=[],f.default.forEach(p.Permissions,function(e){n.allPermissions=n.allPermissions.concat(e)})}return r(t,e),o(t,[{key:"classifyPermissions",value:function(e){var t=[],n=[{key:"project",name:"项目"},{key:"issue",name:"问题"},{key:"files",name:"附件"},{key:"comments",name:"备注"},{key:"worklogs",name:"工作日志"}];return f.default.forEach(n,function(n){var a=f.default.filter(p.Permissions[n.key],function(t){return e.indexOf(t.id)!==-1});if(!(a.length<=0)){var l=s.default.createElement("li",{style:{display:"table",marginBottom:"5px"}},s.default.createElement("div",{style:{marginLeft:"5px"}},n.name),f.default.map(a,function(e){return s.default.createElement("div",{style:{"float":"left",margin:"0px 3px 6px 3px"}},s.default.createElement(c.Label,{style:{color:"#007eff",border:"1px solid #c2e0ff",backgroundColor:"#ebf5ff",fontWeight:"normal"},key:e.id},e.name))}));t.push(l)}}),s.default.createElement("ul",{style:{marginBottom:"0px",paddingLeft:"0px",listStyle:"none"}},t.length<=0?"-":t)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.project,t.data),a=(t.options,t.loading);return a?s.default.createElement("div",{style:{marginTop:"50px",textAlign:"center"}},s.default.createElement("img",{src:m,className:"loading"})):s.default.createElement("div",{style:{marginTop:"15px",marginBottom:"30px"}},s.default.createElement(c.Panel,{header:"问题类型"},n.types&&n.types.length>0?s.default.createElement(c.Table,{responsive:!0,hover:!0},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"名称"),s.default.createElement("th",null,"类型"),s.default.createElement("th",null,"界面"),s.default.createElement("th",null,"工作流"))),s.default.createElement("tbody",null,f.default.map(n.types,function(t){return s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("span",{className:"table-td-title-nobold"},t.name||"","(",t.abb||"",")",t.default&&s.default.createElement("span",{style:{fontWeight:"normal"}}," (默认)"),"subtask"==t.type&&s.default.createElement("span",{style:{fontWeight:"normal"}}," (子任务)")),s.default.createElement("span",{className:"table-td-desc"},t.description||"")),s.default.createElement("td",null,"subtask"===t.type?"子任务":"标准"),s.default.createElement("td",null,s.default.createElement("a",{href:"#",onClick:function(n){n.preventDefault(),e.setState({screenPreviewModalShow:!0,screenSchema:t.screen&&t.screen.schema||[],screenName:t.screen&&t.screen.name||""})}},t.screen&&t.screen.name||"")),s.default.createElement("td",null,s.default.createElement("a",{href:"#",onClick:function(n){n.preventDefault(),e.setState({wfPreviewModalShow:!0,wfSteps:t.workflow&&t.workflow.contents&&t.workflow.contents.steps||[],wfName:t.workflow&&t.workflow.name||""})}},t.workflow&&t.workflow.name||"")))}))):s.default.createElement("div",null,"暂无信息")),s.default.createElement(c.Panel,{header:"问题优先级"},n.priorities&&n.priorities.length>0?s.default.createElement(c.Table,{responsive:!0,hover:!0},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"名称"),s.default.createElement("th",null,"图案"),s.default.createElement("th",null,"描述"))),s.default.createElement("tbody",null,f.default.map(n.priorities||[],function(e){return s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("span",{className:"table-td-title-nobold"},e.name||"",e.default&&s.default.createElement("span",{style:{fontWeight:"normal"}}," (默认)"))),s.default.createElement("td",null,s.default.createElement("div",{className:"circle",style:{backgroundColor:e.color||"#ccc"}})),s.default.createElement("td",null,e.description||"-"))}))):s.default.createElement("div",null,"暂无信息")),s.default.createElement(c.Panel,{header:"项目角色"},n.roles&&n.roles.length>0?s.default.createElement(c.Table,{responsive:!0,hover:!0},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",{style:{width:"300px"}},"名称"),s.default.createElement("th",null,"权限"))),s.default.createElement("tbody",null,f.default.map(n.roles,function(t){return s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("span",{className:"table-td-title-nobold"},t.name||""),s.default.createElement("span",{className:"table-td-desc"},t.description||"")),s.default.createElement("td",null,s.default.createElement("div",{style:{display:"table",width:"100%"}},t.permissions&&t.permissions.length>0?e.classifyPermissions(t.permissions):s.default.createElement("span",null,s.default.createElement("div",{style:{display:"inline-block",margin:"3px 3px 6px 3px"}},"-")))))}))):s.default.createElement("div",null,"暂无信息")),this.state.wfPreviewModalShow&&s.default.createElement(y,{show:!0,close:function(){e.setState({wfPreviewModalShow:!1})},name:this.state.wfName,collection:this.state.wfSteps}),this.state.screenPreviewModalShow&&s.default.createElement(v,{show:!0,close:function(){e.setState({screenPreviewModalShow:!1})},name:this.state.screenName,data:this.state.screenSchema}))}}],[{key:"propTypes",value:{project:u.PropTypes.object.isRequired,data:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,loading:u.PropTypes.bool.isRequired,index:u.PropTypes.func.isRequired},enumerable:!0}]),t}(u.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},1986:function(e,t,n){try{(function(){"use strict";function e(e){return(0,a.asyncFuncCreator)({constant:"PROJECT_CONFIG",promise:function(t){return t.request({url:"/project/"+e+"/config"})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.index=e;var a=n(41)}).call(this)}finally{}}});
//# sourceMappingURL=config-ec660c173da20641fffe.js.map